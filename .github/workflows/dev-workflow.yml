
name: Building to Sufpay Frontend

# on:
#   push:
#     branches:
#       - devops
#   workflow_dispatch:

on:
  workflow_dispatch:

jobs:
  build-and-push:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set Repository Name
        # Extract the repo name from the GITHUB_REPOSITORY environment variable (owner/repo)
        run: echo "REPO_NAME=${GITHUB_REPOSITORY#*/}" >> $GITHUB_ENV

      - name: Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ secrets.DEV_DOCKERHUB_USERNAME }}
          password: ${{ secrets.DOCKERHUB_TOKEN }}

      - name: Build and push Docker image
        run: |
          echo "Repository Name: $REPO_NAME"
          docker build -t ${{ secrets.DEV_DOCKERHUB_USER }}/${REPO_NAME}:latest .
          docker push ${{ secrets.DEV_DOCKERHUB_USER }}/${REPO_NAME}:latest
